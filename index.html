<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Earn Pro Crash</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #07090b; color: white; font-family: sans-serif; overflow: hidden; }
        .game-screen { background: radial-gradient(circle at bottom left, #1a202c, #07090b); height: 320px; position: relative; border-radius: 0 0 30px 30px; overflow: hidden; border-bottom: 2px solid #2d3748; }
        #multiplier { font-size: 70px; font-weight: 900; font-style: italic; z-index: 20; text-shadow: 0 0 20px rgba(255,255,255,0.2); }
        .plane-icon { position: absolute; bottom: 30px; left: 10%; font-size: 45px; transition: all 0.05s linear; z-index: 15; transform: rotate(-10deg); filter: drop-shadow(0 0 10px #3182ce); }
        .smoke { position: absolute; width: 12px; height: 12px; background: rgba(255,255,255,0.15); border-radius: 50%; animation: smokeAnim 0.8s forwards; }
        @keyframes smokeAnim { to { transform: translate(-40px, 20px); opacity: 0; } }
        .bottom-nav { position: fixed; bottom: 20px; left: 0; right: 0; padding: 0 15px; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 100; padding: 20px; align-items: center; justify-content: center; }
        .modal.active { display: flex; }
    </style>
</head>
<body>
    <div class="flex justify-between items-center p-4">
        <div class="flex items-center gap-2">
            <div class="w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center font-bold text-lg" id="user-initial">U</div>
            <div>
                <p class="text-[10px] text-gray-500" id="user-id-display">Loading...</p>
                <h2 class="text-sm font-bold" id="user-name">Guest User</h2>
            </div>
        </div>
        <div class="bg-slate-800 px-4 py-2 rounded-2xl border border-yellow-500/50">
            <span class="text-yellow-500 font-bold">‡ß≥</span> <span id="balance" class="font-black">0.00</span>
        </div>
    </div>

    <div class="game-screen flex flex-col items-center justify-center">
        <div id="game-status" class="absolute top-5 text-[10px] uppercase text-blue-400 font-bold tracking-tighter">Connecting...</div>
        <div id="multiplier">1.00x</div>
        <div id="plane" class="plane-icon" style="display: none;">‚úàÔ∏è</div>
    </div>

    <div class="p-5 mt-2">
        <input type="number" id="bet-amount" value="10" class="w-full bg-slate-900 border border-slate-700 rounded-2xl p-4 text-center text-xl font-bold text-yellow-500 outline-none mb-3">
        <button id="main-btn" onclick="handleGameAction()" class="w-full bg-green-600 h-16 rounded-2xl font-black text-2xl shadow-xl active:scale-95 transition-all">PLACE BET</button>
    </div>

    <div class="bottom-nav grid grid-cols-5 gap-2">
        <button onclick="openModal('deposit')" class="bg-slate-800 py-3 rounded-xl flex flex-col items-center text-[10px]">üí∞<span>Deposit</span></button>
        <button onclick="openModal('withdraw')" class="bg-slate-800 py-3 rounded-xl flex flex-col items-center text-[10px]">üí∏<span>Withdraw</span></button>
        <button onclick="openModal('history')" class="bg-slate-800 py-3 rounded-xl flex flex-col items-center text-[10px]">üìú<span>History</span></button>
        <button onclick="openModal('task')" class="bg-slate-800 py-3 rounded-xl flex flex-col items-center text-[10px]">üì∫<span>Tasks</span></button>
        <button onclick="openModal('refer')" class="bg-slate-800 py-3 rounded-xl flex flex-col items-center text-[10px]">üë•<span>Refer</span></button>
    </div>

    <div id="modal-box" class="modal">
        <div class="bg-slate-900 w-full max-w-sm p-6 rounded-3xl border border-slate-700 relative shadow-2xl">
            <button onclick="closeModal()" class="absolute -top-4 -right-2 bg-red-600 w-10 h-10 rounded-full font-bold">‚úï</button>
            <div id="modal-body"></div>
        </div>
    </div>

    <script src="firebase-logic.js"></script>
    <script src="game-engine.js"></script>
</body>
    </html>
